import{_ as g}from"./DefaultLayout-b37555aa.js";import{Z as k,O as d,m as h,o as r,c as n,a as u,w as p,F as _,b as t,i as x,t as i,g as b}from"./app-8dd26251.js";const w=(e,o)=>{const a=e.__vccOpts||e;for(const[c,l]of o)a[c]=l;return a},y={components:{DefaultLayout:g,Head:k},data(){return{postList:this.posts.data,initialPage:this.$page.url}},methods:{deletePost(e){d.delete(route("posts.delete",{post:e}))},loadMorePosts(){this.posts.next_page_url!==null&&d.get(this.posts.next_page_url,{},{preserveState:!0,preserveScroll:!0,only:["posts"],onSuccess:()=>{this.postList=[...this.postList,...this.posts.data],window.history.replaceState({},this.$page.title,this.initialUrl)}})}},mounted(){Echo.channel("feed").listen("PostCreated",o=>{this.postList=[o.post,...this.postList]}),Echo.channel("feed").listen("PostDeleted",o=>{this.postList=this.postList.filter(a=>a.id!==o.id)}),new IntersectionObserver(o=>o.forEach(a=>a.isIntersecting&&this.loadMorePosts(),{rootMargin:"-150px 0px 0px 0px"})).observe(this.$refs.loadMoreIntersect)},props:{posts:{type:Object,default:()=>({})}}},L=t("title",null,"Home",-1),M={class:"space-y-2 px-3"},$={class:"card-header mb-3 flex justify-between"},C={class:"author items-center flex gap-5"},P={key:0,class:"avatar"},D={class:"w-12 rounded-full"},H=["src"],O={key:1,class:"avatar placeholder"},S={class:"bg-neutral-focus text-neutral-content w-12 rounded-full"},B={class:"text-2xl font-bold"},E={class:"author-text"},I={class:"font-bold"},j=["href"],F={class:"font-mono text-gray-500 mb-2 text-sm"},N=["href"],V=["onClick"],U=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-trash-x",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),t("path",{d:"M4 7h16"}),t("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),t("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"}),t("path",{d:"M10 12l4 4m0 -4l-4 4"})],-1),z=[U],Z={class:"break-words text-lg"},q={ref:"loadMoreIntersect"};function A(e,o,a,c,l,f){const m=h("Head"),v=h("DefaultLayout");return r(),n(_,null,[u(m,null,{default:p(()=>[L]),_:1}),u(v,null,{default:p(()=>[t("div",M,[(r(!0),n(_,null,x(l.postList,s=>(r(),n("div",{key:s,class:"card border rounded p-3"},[t("div",$,[t("div",C,[s.author.profile_photo_path?(r(),n("div",P,[t("div",D,[t("img",{src:s.author.profile_photo_path,alt:"post.author.name"},null,8,H)])])):(r(),n("div",O,[t("div",S,[t("span",B,i(s.author.email[0].toUpperCase()),1)])])),t("div",E,[t("h6",I,[t("a",{href:e.route("home",{author:s.author.nickname})},i(s.author.name),9,j)]),t("p",F,[t("a",{href:e.route("home",{author:s.author.nickname})}," @"+i(s.author.nickname),9,N)])])]),e.$page.props.auth.user&&e.$page.props.auth.user.id&&e.$page.props.auth.user.id===s.author.id?(r(),n("button",{key:0,onClick:G=>f.deletePost(s.id)},z,8,V)):b("",!0)]),t("p",Z,i(s.content),1)]))),128)),t("span",q,null,512)])]),_:1})],64)}const Q=w(y,[["render",A]]);export{Q as default};
